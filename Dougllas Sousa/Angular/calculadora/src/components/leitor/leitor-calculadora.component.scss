@use "tailwindcss";

.calculator-display {
  @apply text-white flex flex-col justify-end;

  /* Enhanced proportions and spacing */
  min-height: clamp(120px, 20vw, 180px);
  padding: clamp(1.5rem, 5vw, 2.5rem);

  /* Sophisticated gradient background */
  background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);

  /* Subtle inner glow */
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1),
    inset 0 -1px 2px rgba(0, 0, 0, 0.2);

  /* Enhanced styling */
  position: relative;
  overflow: hidden;
  margin-top: 0;

  /* Better transitions */
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Top highlight line */
.calculator-display::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.4),
    transparent
  );
}

/* Expression line - Mathematical formula display */
.expression {
  @apply text-gray-300 mb-3 min-h-[24px];
  @apply overflow-hidden text-ellipsis whitespace-nowrap text-right;

  /* Enhanced typography */
  font-family: "JetBrains Mono", "SF Mono", "Monaco", "Consolas", monospace;
  font-size: clamp(0.875rem, 2.5vw, 1.125rem);
  font-weight: 400;
  line-height: 1.4;
  letter-spacing: 0.5px;

  /* Smooth reveal animation */
  opacity: 0;
  transform: translateY(-8px);
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.expression.visible {
  opacity: 0.85;
  transform: translateY(0);
}

/* Main display container */
.main-display {
  @apply flex items-center justify-end;
  min-height: clamp(60px, 12vw, 100px);
}

/* Primary value display */
.value {
  @apply text-white text-right;
  @apply overflow-hidden text-ellipsis whitespace-nowrap;
  @apply max-w-full;

  /* Enhanced typography system */
  font-family: "SF Pro Display", -apple-system, BlinkMacSystemFont, sans-serif;
  font-size: clamp(2.5rem, 8vw, 4rem);
  font-weight: 300;
  line-height: 1.1;
  letter-spacing: clamp(-0.03em, -0.5vw, -0.02em);

  /* Advanced number formatting */
  font-variant-numeric: tabular-nums;
  font-feature-settings: "tnum", "kern";

  /* Enhanced visual effects */
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.4), 0 0 20px rgba(255, 255, 255, 0.1);

  /* Smooth transitions */
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

  /* Selection styling */
  -webkit-user-select: all;
  -moz-user-select: all;
  user-select: all;
}

.value:hover {
  text-shadow: 0 4px 8px rgba(0, 0, 0, 0.5), 0 0 30px rgba(255, 255, 255, 0.15);
  transform: scale(1.02);
}

/* Sophisticated shimmer effect */
.calculator-display::after {
  content: "";
  position: absolute;
  top: 15%;
  left: -60%;
  width: 220%;
  height: 70%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.04),
    transparent
  );
  transform: skewX(-20deg);
  animation: shimmer 12s ease-in-out infinite;
  pointer-events: none;
}

@keyframes shimmer {
  0%,
  85%,
  100% {
    transform: translateX(-120%) skewX(-20deg);
    opacity: 0;
  }
  45%,
  55% {
    transform: translateX(120%) skewX(-20deg);
    opacity: 1;
  }
}

/* Enhanced responsive design system */
@media (max-width: 640px) {
  .calculator-display {
    min-height: clamp(100px, 18vw, 140px);
    padding: clamp(1.25rem, 4vw, 2rem);
  }

  .value {
    font-size: clamp(2rem, 7vw, 3rem);
    letter-spacing: clamp(-0.02em, -0.3vw, -0.01em);
  }

  .expression {
    font-size: clamp(0.75rem, 2.2vw, 1rem);
    margin-bottom: clamp(0.5rem, 2vw, 0.75rem);
  }
}

@media (min-width: 641px) and (max-width: 1024px) {
  .calculator-display {
    min-height: clamp(140px, 19vw, 160px);
    padding: clamp(2rem, 4.5vw, 2.25rem);
  }

  .value {
    font-size: clamp(3rem, 7.5vw, 3.5rem);
  }
}

@media (min-width: 1025px) {
  .calculator-display {
    min-height: 180px;
    padding: 2.5rem;
  }

  .value {
    font-size: 4rem;
  }

  .value:hover {
    transform: scale(1.03);
  }
}

/* Smooth value change animation */
.value {
  animation: fadeInValue 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes fadeInValue {
  from {
    opacity: 0.6;
    transform: scale(0.97) translateY(4px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

/* Error state styling */
.value.error {
  @apply text-red-400;
  text-shadow: 0 2px 4px rgba(239, 68, 68, 0.4), 0 0 20px rgba(239, 68, 68, 0.2);
  animation: errorShake 0.6s ease-in-out;
}

@keyframes errorShake {
  0%,
  100% {
    transform: translateX(0);
  }
  20% {
    transform: translateX(-6px);
  }
  40% {
    transform: translateX(6px);
  }
  60% {
    transform: translateX(-4px);
  }
  80% {
    transform: translateX(4px);
  }
}

/* Calculating state */
.value.calculating {
  opacity: 0.7;
  animation: calculating 1.5s ease-in-out infinite;
}

@keyframes calculating {
  0%,
  100% {
    opacity: 0.7;
    transform: scale(1);
  }
  50% {
    opacity: 0.9;
    transform: scale(1.01);
  }
}

/* Large number formatting */
.value.large-number {
  font-size: clamp(1.75rem, 6vw, 2.8rem);
  letter-spacing: clamp(-0.02em, -0.2vw, -0.01em);
}

/* Very large number formatting */
.value.very-large-number {
  font-size: clamp(1.25rem, 4.5vw, 2rem);
  letter-spacing: 0;
}

/* Accessibility improvements */
.value:focus-visible {
  outline: 2px solid rgba(59, 130, 246, 0.8);
  outline-offset: 4px;
  border-radius: 4px;
}

/* High contrast mode */
@media (prefers-contrast: high) {
  .calculator-display {
    background: #000000;
    border: 2px solid #ffffff;
  }

  .value {
    color: #ffffff;
    text-shadow: none;
  }

  .expression {
    color: #cccccc;
  }
}

/* Reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  .calculator-display::after {
    animation: none;
  }

  .value,
  .expression {
    transition: none;
    animation: none;
  }

  .value:hover {
    transform: none;
  }
}

/* Dark mode enhancements */
@media (prefers-color-scheme: dark) {
  .calculator-display {
    background: linear-gradient(135deg, #0f172a 0%, #020617 100%);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05),
      inset 0 -1px 2px rgba(0, 0, 0, 0.4);
  }

  .value {
    color: #f8fafc;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.6),
      0 0 20px rgba(255, 255, 255, 0.05);
  }
}

/* Print styles */
@media print {
  .calculator-display {
    background: white !important;
    color: black !important;
    box-shadow: none !important;
  }

  .value {
    color: black !important;
    text-shadow: none !important;
  }

  .expression {
    color: #666666 !important;
  }

  .calculator-display::before,
  .calculator-display::after {
    display: none !important;
  }
}
